import { NextResponse } from "next/server";
import type { Product } from "@/types";

// Mock data - will be replaced with database queries after homepage approval
const mockProducts: Product[] = [
  {
    id: "1",
    title: "پسته درجه یک",
    titleEn: "Premium Pistachios",
    price: 25,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1606312619070-d48b4bdc6e3c?w=400&h=400&fit=crop",
    moq: 100,
    sold: 1250,
    supplierId: "s1",
    supplierName: "Iranian Nuts Co.",
    verified: true,
    categoryId: "3",
    rating: 4.8,
    reviewCount: 156,
  },
  {
    id: "2",
    title: "زعفران اصل",
    titleEn: "Authentic Saffron",
    price: 45,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1606914469633-bd39206ea739?w=400&h=400&fit=crop",
    moq: 50,
    sold: 890,
    supplierId: "s2",
    supplierName: "Saffron Export",
    verified: true,
    categoryId: "3",
    rating: 4.9,
    reviewCount: 203,
  },
  {
    id: "3",
    title: "فرش دستباف",
    titleEn: "Handmade Carpet",
    price: 350,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1586075010923-2dd4570fb338?w=400&h=400&fit=crop",
    moq: 1,
    sold: 45,
    supplierId: "s3",
    supplierName: "Persian Carpets",
    verified: true,
    categoryId: "6",
    rating: 5.0,
    reviewCount: 12,
  },
  {
    id: "4",
    title: "عسل طبیعی",
    titleEn: "Natural Honey",
    price: 18,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1587049352846-4a222e784d38?w=400&h=400&fit=crop",
    moq: 24,
    sold: 670,
    supplierId: "s4",
    supplierName: "Honey Farm",
    verified: false,
    categoryId: "3",
    rating: 4.6,
    reviewCount: 89,
  },
  {
    id: "5",
    title: "چرم طبیعی",
    titleEn: "Natural Leather",
    price: 85,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1624222247344-550fb60583fd?w=400&h=400&fit=crop",
    moq: 10,
    sold: 320,
    supplierId: "s5",
    supplierName: "Leather Works",
    verified: true,
    categoryId: "2",
    rating: 4.7,
    reviewCount: 67,
  },
  {
    id: "6",
    title: "سرم صورت",
    titleEn: "Face Serum",
    price: 32,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=400&h=400&fit=crop",
    moq: 12,
    sold: 540,
    supplierId: "s6",
    supplierName: "Beauty Products",
    verified: true,
    categoryId: "7",
    rating: 4.5,
    reviewCount: 134,
  },
  {
    id: "7",
    title: "ماشین برش لیزری",
    titleEn: "Laser Cutting Machine",
    price: 12500,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=400&h=400&fit=crop&q=80",
    moq: 1,
    sold: 45,
    supplierId: "s7",
    supplierName: "Tech Manufacturing Co.",
    verified: true,
    categoryId: "4",
    rating: 4.8,
    reviewCount: 89,
  },
  {
    id: "8",
    title: "ماشین بسته‌بندی اتوماتیک",
    titleEn: "Automatic Packaging Machine",
    price: 8500,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&h=400&fit=crop&q=80",
    moq: 1,
    sold: 32,
    supplierId: "s8",
    supplierName: "Industrial Equipment Ltd.",
    verified: true,
    categoryId: "4",
    rating: 4.7,
    reviewCount: 56,
  },
  {
    id: "9",
    title: "دستگاه CNC",
    titleEn: "CNC Machine",
    price: 15000,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=400&h=400&fit=crop&q=80",
    moq: 1,
    sold: 28,
    supplierId: "s9",
    supplierName: "Precision Tools Inc.",
    verified: true,
    categoryId: "4",
    rating: 4.9,
    reviewCount: 123,
  },
  {
    id: "10",
    title: "گوشی موبایل",
    titleEn: "Smartphone",
    price: 450,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=400&fit=crop&q=80",
    moq: 50,
    sold: 2340,
    supplierId: "s10",
    supplierName: "Electronics Global",
    verified: true,
    categoryId: "1",
    rating: 4.6,
    reviewCount: 567,
  },
  {
    id: "11",
    title: "لباس ورزشی",
    titleEn: "Sportswear",
    price: 35,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1552902865-b72c031ac5ea?w=400&h=400&fit=crop&q=80",
    moq: 100,
    sold: 890,
    supplierId: "s11",
    supplierName: "Fashion Wear Co.",
    verified: false,
    categoryId: "2",
    rating: 4.4,
    reviewCount: 234,
  },
  {
    id: "12",
    title: "مواد شیمیایی صنعتی",
    titleEn: "Industrial Chemicals",
    price: 120,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1582719201952-c1ea6dc78a3d?w=400&h=400&fit=crop&q=80",
    moq: 500,
    sold: 4500,
    supplierId: "s12",
    supplierName: "Chemical Solutions",
    verified: true,
    categoryId: "5",
    rating: 4.7,
    reviewCount: 345,
  },
  {
    id: "13",
    title: "سیمان پرتلند",
    titleEn: "Portland Cement",
    price: 85,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160563-40a4e3b4b3b3?w=400&h=400&fit=crop&q=80",
    moq: 1000,
    sold: 56000,
    supplierId: "s13",
    supplierName: "Construction Materials",
    verified: true,
    categoryId: "6",
    rating: 4.8,
    reviewCount: 890,
  },
  {
    id: "14",
    title: "کرم ضد آفتاب",
    titleEn: "Sunscreen Cream",
    price: 15,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=400&h=400&fit=crop&q=80",
    moq: 200,
    sold: 1200,
    supplierId: "s14",
    supplierName: "Beauty Care Products",
    verified: true,
    categoryId: "7",
    rating: 4.5,
    reviewCount: 456,
  },
  {
    id: "15",
    title: "کابل برق",
    titleEn: "Electrical Cable",
    price: 55,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=400&h=400&fit=crop&q=80",
    moq: 100,
    sold: 3400,
    supplierId: "s15",
    supplierName: "Electric Supply Co.",
    verified: true,
    categoryId: "1",
    rating: 4.6,
    reviewCount: 678,
  },
  {
    id: "16",
    title: "پارچه کتان",
    titleEn: "Linen Fabric",
    price: 28,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1582719201952-c1ea6dc78a3d?w=400&h=400&fit=crop&q=80",
    moq: 200,
    sold: 2100,
    supplierId: "s16",
    supplierName: "Textile Manufacturers",
    verified: false,
    categoryId: "2",
    rating: 4.3,
    reviewCount: 189,
  },
  {
    id: "17",
    title: "ماشین آسفالت",
    titleEn: "Asphalt Machine",
    price: 45000,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&h=400&fit=crop&q=80",
    moq: 1,
    sold: 12,
    supplierId: "s17",
    supplierName: "Heavy Machinery Inc.",
    verified: true,
    categoryId: "4",
    rating: 4.9,
    reviewCount: 45,
  },
  {
    id: "18",
    title: "رزین اپوکسی",
    titleEn: "Epoxy Resin",
    price: 75,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160563-40a4e3b4b3b3?w=400&h=400&fit=crop&q=80",
    moq: 300,
    sold: 1800,
    supplierId: "s18",
    supplierName: "Chemical Industries",
    verified: true,
    categoryId: "5",
    rating: 4.7,
    reviewCount: 267,
  },
  {
    id: "19",
    title: "آجر سفالی",
    titleEn: "Clay Brick",
    price: 0.35,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=400&h=400&fit=crop&q=80",
    moq: 10000,
    sold: 250000,
    supplierId: "s19",
    supplierName: "Building Materials Co.",
    verified: true,
    categoryId: "6",
    rating: 4.6,
    reviewCount: 1200,
  },
  {
    id: "20",
    title: "شامپو طبیعی",
    titleEn: "Natural Shampoo",
    price: 12,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=400&h=400&fit=crop&q=80",
    moq: 150,
    sold: 890,
    supplierId: "s20",
    supplierName: "Natural Beauty Co.",
    verified: false,
    categoryId: "7",
    rating: 4.4,
    reviewCount: 234,
  },
  {
    id: "21",
    title: "ماشین برش پلاسما",
    titleEn: "Plasma Cutting Machine",
    price: 9500,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&h=400&fit=crop&q=80",
    moq: 1,
    sold: 34,
    supplierId: "s21",
    supplierName: "Metal Working Equipment",
    verified: true,
    categoryId: "4",
    rating: 4.8,
    reviewCount: 78,
  },
  {
    id: "22",
    title: "لپ تاپ",
    titleEn: "Laptop",
    price: 650,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=400&fit=crop&q=80",
    moq: 20,
    sold: 567,
    supplierId: "s22",
    supplierName: "Computer Solutions",
    verified: true,
    categoryId: "1",
    rating: 4.7,
    reviewCount: 345,
  },
  {
    id: "23",
    title: "پلی استر",
    titleEn: "Polyester Fabric",
    price: 22,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1582719201952-c1ea6dc78a3d?w=400&h=400&fit=crop&q=80",
    moq: 300,
    sold: 3400,
    supplierId: "s23",
    supplierName: "Fabric Suppliers",
    verified: true,
    categoryId: "2",
    rating: 4.5,
    reviewCount: 456,
  },
  {
    id: "24",
    title: "ماشین تزریق پلاستیک",
    titleEn: "Plastic Injection Machine",
    price: 35000,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=400&h=400&fit=crop&q=80",
    moq: 1,
    sold: 18,
    supplierId: "s24",
    supplierName: "Plastic Machinery Co.",
    verified: true,
    categoryId: "4",
    rating: 4.9,
    reviewCount: 56,
  },
  {
    id: "25",
    title: "روغن صنعتی",
    titleEn: "Industrial Oil",
    price: 95,
    currency: "USD",
    image: "https://images.unsplash.com/photo-1581092160563-40a4e3b4b3b3?w=400&h=400&fit=crop&q=80",
    moq: 200,
    sold: 2800,
    supplierId: "s25",
    supplierName: "Lubricant Solutions",
    verified: true,
    categoryId: "5",
    rating: 4.6,
    reviewCount: 389,
  },
];

export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url);
    const category = searchParams.get("category");
    const limit = parseInt(searchParams.get("limit") || "10");
    const offset = parseInt(searchParams.get("offset") || "0");

    let products = [...mockProducts];

    if (category) {
      products = products.filter((p) => p.categoryId === category);
    }

    // Pagination
    const paginatedProducts = products.slice(offset, offset + limit);

    return NextResponse.json({
      products: paginatedProducts,
      total: products.length,
      limit,
      offset,
    });
  } catch (error) {
    return NextResponse.json(
      { error: "Failed to fetch products" },
      { status: 500 }
    );
  }
}

